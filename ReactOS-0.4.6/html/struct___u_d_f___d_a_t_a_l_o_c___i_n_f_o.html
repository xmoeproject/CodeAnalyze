<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ReactOS: _UDF_DATALOC_INFO结构体 参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ReactOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','搜索');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public 属性</a> &#124;
<a href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o-members.html">所有成员列表</a>  </div>
  <div class="headertitle">
<div class="title">_UDF_DATALOC_INFO结构体 参考</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="udf__rel_8h_source.html">udf_rel.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public 属性</h2></td></tr>
<tr class="memitem:aa16e04c294edf8f5cdf5e214c390c246"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interfacestruct.html">struct</a> <a class="el" href="struct___u_d_f_n_t_required_f_c_b.html">_UDFNTRequiredFCB</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o.html#aa16e04c294edf8f5cdf5e214c390c246">CommonFcb</a></td></tr>
<tr class="separator:aa16e04c294edf8f5cdf5e214c390c246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9515c0bbac1936572a7347ae50e7dd55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct___e_x_t_e_n_t___i_n_f_o.html">EXTENT_INFO</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o.html#a9515c0bbac1936572a7347ae50e7dd55">DataLoc</a></td></tr>
<tr class="separator:a9515c0bbac1936572a7347ae50e7dd55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade01a853270827c06a39f6b33db3f6a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct___e_x_t_e_n_t___i_n_f_o.html">EXTENT_INFO</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o.html#ade01a853270827c06a39f6b33db3f6a7">AllocLoc</a></td></tr>
<tr class="separator:ade01a853270827c06a39f6b33db3f6a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a412523da551f2c58ace14d1ca23b5ec8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct___e_x_t_e_n_t___i_n_f_o.html">EXTENT_INFO</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o.html#a412523da551f2c58ace14d1ca23b5ec8">FELoc</a></td></tr>
<tr class="separator:a412523da551f2c58ace14d1ca23b5ec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf8ffd0e631978872f812f5eae001efa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtag.html">tag</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o.html#aaf8ffd0e631978872f812f5eae001efa">FileEntry</a></td></tr>
<tr class="separator:aaf8ffd0e631978872f812f5eae001efa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3453a52e16f8a1d939fd066bc9aa0ac"><td class="memItemLeft" align="right" valign="top"><a id="ae3453a52e16f8a1d939fd066bc9aa0ac"></a>
uint32&#160;</td><td class="memItemRight" valign="bottom"><b>FileEntryLen</b></td></tr>
<tr class="separator:ae3453a52e16f8a1d939fd066bc9aa0ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b5650cc4b76759629799d5131b16d9f"><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o.html#a1b5650cc4b76759629799d5131b16d9f">FE_Flags</a></td></tr>
<tr class="separator:a1b5650cc4b76759629799d5131b16d9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac573bac9d1c567842bbb5c68798927fb"><td class="memItemLeft" align="right" valign="top">uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o.html#ac573bac9d1c567842bbb5c68798927fb">LinkRefCount</a></td></tr>
<tr class="separator:ac573bac9d1c567842bbb5c68798927fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefc2ae1a50056dcbd7fa7bae15a1931d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct___d_i_r___i_n_d_e_x___h_d_r.html">PDIR_INDEX_HDR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o.html#aefc2ae1a50056dcbd7fa7bae15a1931d">DirIndex</a></td></tr>
<tr class="separator:aefc2ae1a50056dcbd7fa7bae15a1931d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7192926e7598ea7e09b9f2f82d218a3"><td class="memItemLeft" align="right" valign="top"><a id="af7192926e7598ea7e09b9f2f82d218a3"></a>
<a class="el" href="interfacestruct.html">struct</a> <a class="el" href="struct___u_d_f___f_i_l_e___i_n_f_o.html">_UDF_FILE_INFO</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>LinkedFileInfo</b></td></tr>
<tr class="separator:af7192926e7598ea7e09b9f2f82d218a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c3f0b9df859980637a14f92d08350d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interfacestruct.html">struct</a> <a class="el" href="struct___u_d_f___f_i_l_e___i_n_f_o.html">_UDF_FILE_INFO</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o.html#a1c3f0b9df859980637a14f92d08350d4">SDirInfo</a></td></tr>
<tr class="separator:a1c3f0b9df859980637a14f92d08350d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p><a class="el" href="namespace_this.html">This</a> structure describes actual data location. <a class="el" href="class_it.html">It</a> is an analogue (and a pair in this implementation) of NTRequiredFcb structure.</p>
<p>UDF FSD keeps list of all Dloc structures &amp; their on-disk representations. Before allocating new Dloc for newly opened file the FSD checks if the Dloc with the same Lba is already in memory. If it is so the initiator receive pointer to existing structure instead of allocating new. <a class="el" href="namespace_this.html">This</a> allows to handle HardLiks properly. When all references to given Dloc has gone it is released. In case of file deletion the association between Dloc &amp; Lba is discarded, but Dloc is not released untill UDFCleanUpFile__() is called. <a class="el" href="namespace_this.html">This</a> prevents interference between deleted files &amp; newly created ones in case of equal Lba of deleted &amp; created FileEntries. </p>
</div><h2 class="groupheader">类成员变量说明</h2>
<a id="ade01a853270827c06a39f6b33db3f6a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade01a853270827c06a39f6b33db3f6a7">&#9670;&nbsp;</a></span>AllocLoc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct___e_x_t_e_n_t___i_n_f_o.html">EXTENT_INFO</a> _UDF_DATALOC_INFO::AllocLoc</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Describes on-disk location of allocation descriptors. They are part of metadata associated with given file If this structure is not initialized UDF assumes that no allocation descriptors recorded for this file. Usually this structure points to the same LBA as <a class="el" href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o.html#a412523da551f2c58ace14d1ca23b5ec8">FELoc</a>, but with non-zero offset inside logical block. The only exception is for files recorded using IN_ICB method (see above). In such a case this structure must be zero-filled </p>

</div>
</div>
<a id="aa16e04c294edf8f5cdf5e214c390c246"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa16e04c294edf8f5cdf5e214c390c246">&#9670;&nbsp;</a></span>CommonFcb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interfacestruct.html">struct</a> <a class="el" href="struct___u_d_f_n_t_required_f_c_b.html">_UDFNTRequiredFCB</a>* _UDF_DATALOC_INFO::CommonFcb</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>NT-specific field. As soon as NT supports HardLink concept it has own structure describing the file's actual data. </p>

</div>
</div>
<a id="a9515c0bbac1936572a7347ae50e7dd55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9515c0bbac1936572a7347ae50e7dd55">&#9670;&nbsp;</a></span>DataLoc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct___e_x_t_e_n_t___i_n_f_o.html">EXTENT_INFO</a> _UDF_DATALOC_INFO::DataLoc</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Describes on-disk location of user data. If the file is recorded using IN_ICB method this structure points to the same LBA as <a class="el" href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o.html#a412523da551f2c58ace14d1ca23b5ec8">FELoc</a>, but with non-zero offset inside logical block </p>

</div>
</div>
<a id="aefc2ae1a50056dcbd7fa7bae15a1931d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefc2ae1a50056dcbd7fa7bae15a1931d">&#9670;&nbsp;</a></span>DirIndex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct___d_i_r___i_n_d_e_x___h_d_r.html">PDIR_INDEX_HDR</a> _UDF_DATALOC_INFO::DirIndex</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Points to the list of files referenced by the given file. <a class="el" href="namespace_this.html">This</a> field is used for directories only. Otherwise its value should be NULL. </p>

</div>
</div>
<a id="a1b5650cc4b76759629799d5131b16d9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b5650cc4b76759629799d5131b16d9f">&#9670;&nbsp;</a></span>FE_Flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 _UDF_DATALOC_INFO::FE_Flags</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set of flags. <a class="el" href="namespace_this.html">This</a> is intended for internal use. Valid flags:</p><ul>
<li>#UDF_FE_FLAG_FE_MODIFIED<br />
 Presence of this bit means that given FileEntry was modified &amp; should be flushed</li>
<li>#UDF_FE_FLAG_HAS_SDIR<br />
 Presence of this bit means that given FileEntry has an associated Stream Dir.</li>
<li>#UDF_FE_FLAG_IS_SDIR<br />
 Presence of this bit means that given FileEntry represents a Stream Dir. </li>
</ul>

</div>
</div>
<a id="a412523da551f2c58ace14d1ca23b5ec8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a412523da551f2c58ace14d1ca23b5ec8">&#9670;&nbsp;</a></span>FELoc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct___e_x_t_e_n_t___i_n_f_o.html">EXTENT_INFO</a> _UDF_DATALOC_INFO::FELoc</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Describes on-disk location the FileEntry. <a class="el" href="namespace_this.html">This</a> is on-disk metadata block describing file location. </p>

</div>
</div>
<a id="aaf8ffd0e631978872f812f5eae001efa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf8ffd0e631978872f812f5eae001efa">&#9670;&nbsp;</a></span>FileEntry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtag.html">tag</a>* _UDF_DATALOC_INFO::FileEntry</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pointer to cached FileEntry. <a class="el" href="namespace_this.html">This</a> field mush be valid untill all file instances are cleaned up (see UDFCleanUpFile__() and <a class="el" href="struct___u_d_f___d_a_t_a_l_o_c___i_n_f_o.html#ac573bac9d1c567842bbb5c68798927fb">LinkRefCount</a>). </p>

</div>
</div>
<a id="ac573bac9d1c567842bbb5c68798927fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac573bac9d1c567842bbb5c68798927fb">&#9670;&nbsp;</a></span>LinkRefCount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 _UDF_DATALOC_INFO::LinkRefCount</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Counter of currently opened directory tree instances (files) pointing to given data. <a class="el" href="class_it.html">It</a> is introduced because UDF supports HardLink concept. UDF_DATALOC_INFO structure should not be released untill this field reaches zero. </p>

</div>
</div>
<a id="a1c3f0b9df859980637a14f92d08350d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c3f0b9df859980637a14f92d08350d4">&#9670;&nbsp;</a></span>SDirInfo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interfacestruct.html">struct</a> <a class="el" href="struct___u_d_f___f_i_l_e___i_n_f_o.html">_UDF_FILE_INFO</a>* _UDF_DATALOC_INFO::SDirInfo</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Points to the <a class="el" href="struct_file_info.html">FileInfo</a> describing the StreamDirectory associated with the given file. If the file has no associated StreamDirectory this field must bu NULL. </p>

</div>
</div>
<hr/>该结构体的文档由以下文件生成:<ul>
<li>E:/ReactOS-0.4.6/drivers/filesystems/udfs/udf_info/<a class="el" href="udf__rel_8h_source.html">udf_rel.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
