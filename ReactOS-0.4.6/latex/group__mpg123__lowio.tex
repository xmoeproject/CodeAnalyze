\hypertarget{group__mpg123__lowio}{}\section{mpg123 low level I/O}
\label{group__mpg123__lowio}\index{mpg123 low level I/O@{mpg123 low level I/O}}
\subsection*{函数}
\begin{DoxyCompactItemize}
\item 
\hyperlink{mpg123_8h_a2ba98cfba3f760879df70e755b2a61cc}{M\+P\+G123\+\_\+\+E\+X\+P\+O\+RT} int \hyperlink{group__mpg123__lowio_gaaae8cfb0de3a2bc1dc97d916aa519772}{mpg123\+\_\+replace\+\_\+buffer} (\hyperlink{group__mpg123__init_ga6728e2839a395f3a07d4514da659faca}{mpg123\+\_\+handle} $\ast$mh, unsigned char $\ast$data, size\+\_\+t size)
\item 
\hyperlink{mpg123_8h_a2ba98cfba3f760879df70e755b2a61cc}{M\+P\+G123\+\_\+\+E\+X\+P\+O\+RT} size\+\_\+t \hyperlink{group__mpg123__lowio_ga00c0874bdad4a3f6366a035694f298d6}{mpg123\+\_\+outblock} (\hyperlink{group__mpg123__init_ga6728e2839a395f3a07d4514da659faca}{mpg123\+\_\+handle} $\ast$mh)
\item 
\hyperlink{mpg123_8h_a2ba98cfba3f760879df70e755b2a61cc}{M\+P\+G123\+\_\+\+E\+X\+P\+O\+RT} int \hyperlink{group__mpg123__lowio_ga00a65b6bc6d3e56e3c055943c30894ab}{mpg123\+\_\+replace\+\_\+reader} (\hyperlink{group__mpg123__init_ga6728e2839a395f3a07d4514da659faca}{mpg123\+\_\+handle} $\ast$mh, ssize\+\_\+t($\ast$r\+\_\+read)(int, \hyperlink{interfacevoid}{void} $\ast$, size\+\_\+t), off\+\_\+t($\ast$r\+\_\+lseek)(int, off\+\_\+t, int))
\item 
\hyperlink{mpg123_8h_a2ba98cfba3f760879df70e755b2a61cc}{M\+P\+G123\+\_\+\+E\+X\+P\+O\+RT} int \hyperlink{group__mpg123__lowio_ga61a125c56f2aab9590a4b1a29194dc10}{mpg123\+\_\+replace\+\_\+reader\+\_\+handle} (\hyperlink{group__mpg123__init_ga6728e2839a395f3a07d4514da659faca}{mpg123\+\_\+handle} $\ast$mh, ssize\+\_\+t($\ast$r\+\_\+read)(\hyperlink{interfacevoid}{void} $\ast$, \hyperlink{interfacevoid}{void} $\ast$, size\+\_\+t), off\+\_\+t($\ast$r\+\_\+lseek)(\hyperlink{interfacevoid}{void} $\ast$, off\+\_\+t, int), \hyperlink{interfacevoid}{void}($\ast$cleanup)(\hyperlink{interfacevoid}{void} $\ast$))
\end{DoxyCompactItemize}


\subsection{详细描述}
You may want to do tricky stuff with I/O that does not work with mpg123\textquotesingle{}s default file access or you want to make it decode into your own pocket... 

\subsection{函数说明}
\mbox{\Hypertarget{group__mpg123__lowio_ga00c0874bdad4a3f6366a035694f298d6}\label{group__mpg123__lowio_ga00c0874bdad4a3f6366a035694f298d6}} 
\index{mpg123 low level I/O@{mpg123 low level I/O}!mpg123\+\_\+outblock@{mpg123\+\_\+outblock}}
\index{mpg123\+\_\+outblock@{mpg123\+\_\+outblock}!mpg123 low level I/O@{mpg123 low level I/O}}
\subsubsection{\texorpdfstring{mpg123\+\_\+outblock()}{mpg123\_outblock()}}
{\footnotesize\ttfamily \hyperlink{mpg123_8h_a2ba98cfba3f760879df70e755b2a61cc}{M\+P\+G123\+\_\+\+E\+X\+P\+O\+RT} size\+\_\+t mpg123\+\_\+outblock (\begin{DoxyParamCaption}\item[{\hyperlink{group__mpg123__init_ga6728e2839a395f3a07d4514da659faca}{mpg123\+\_\+handle} $\ast$}]{mh }\end{DoxyParamCaption})}

The max size of one frame\textquotesingle{}s decoded output with current settings. Use that to determine an appropriate minimum buffer size for decoding one frame. 
\begin{DoxyParams}{参数}
{\em mh} & handle \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
maximum decoded data size in bytes 
\end{DoxyReturn}
\mbox{\Hypertarget{group__mpg123__lowio_gaaae8cfb0de3a2bc1dc97d916aa519772}\label{group__mpg123__lowio_gaaae8cfb0de3a2bc1dc97d916aa519772}} 
\index{mpg123 low level I/O@{mpg123 low level I/O}!mpg123\+\_\+replace\+\_\+buffer@{mpg123\+\_\+replace\+\_\+buffer}}
\index{mpg123\+\_\+replace\+\_\+buffer@{mpg123\+\_\+replace\+\_\+buffer}!mpg123 low level I/O@{mpg123 low level I/O}}
\subsubsection{\texorpdfstring{mpg123\+\_\+replace\+\_\+buffer()}{mpg123\_replace\_buffer()}}
{\footnotesize\ttfamily \hyperlink{mpg123_8h_a2ba98cfba3f760879df70e755b2a61cc}{M\+P\+G123\+\_\+\+E\+X\+P\+O\+RT} int mpg123\+\_\+replace\+\_\+buffer (\begin{DoxyParamCaption}\item[{\hyperlink{group__mpg123__init_ga6728e2839a395f3a07d4514da659faca}{mpg123\+\_\+handle} $\ast$}]{mh,  }\item[{unsigned char $\ast$}]{data,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}

Replace default internal buffer with user-\/supplied buffer. Instead of working on it\textquotesingle{}s own private buffer, mpg123 will directly use the one you provide for storing decoded audio. Note that the required buffer size could be bigger than expected from output encoding if libmpg123 has to convert from primary decoder output (p.\+ex. 32 bit storage for 24 bit output). 
\begin{DoxyParams}{参数}
{\em mh} & handle \\
\hline
{\em data} & pointer to user buffer \\
\hline
{\em size} & of buffer in bytes \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
M\+P\+G123\+\_\+\+OK on success 
\end{DoxyReturn}
\mbox{\Hypertarget{group__mpg123__lowio_ga00a65b6bc6d3e56e3c055943c30894ab}\label{group__mpg123__lowio_ga00a65b6bc6d3e56e3c055943c30894ab}} 
\index{mpg123 low level I/O@{mpg123 low level I/O}!mpg123\+\_\+replace\+\_\+reader@{mpg123\+\_\+replace\+\_\+reader}}
\index{mpg123\+\_\+replace\+\_\+reader@{mpg123\+\_\+replace\+\_\+reader}!mpg123 low level I/O@{mpg123 low level I/O}}
\subsubsection{\texorpdfstring{mpg123\+\_\+replace\+\_\+reader()}{mpg123\_replace\_reader()}}
{\footnotesize\ttfamily \hyperlink{mpg123_8h_a2ba98cfba3f760879df70e755b2a61cc}{M\+P\+G123\+\_\+\+E\+X\+P\+O\+RT} int mpg123\+\_\+replace\+\_\+reader (\begin{DoxyParamCaption}\item[{\hyperlink{group__mpg123__init_ga6728e2839a395f3a07d4514da659faca}{mpg123\+\_\+handle} $\ast$}]{mh,  }\item[{ssize\+\_\+t($\ast$)(int, \hyperlink{interfacevoid}{void} $\ast$, size\+\_\+t)}]{r\+\_\+read,  }\item[{off\+\_\+t($\ast$)(int, off\+\_\+t, int)}]{r\+\_\+lseek }\end{DoxyParamCaption})}

Replace low-\/level stream access functions; read and lseek as known in P\+O\+S\+IX. You can use this to make any fancy file opening/closing yourself, using \hyperlink{group__mpg123__input_ga969c0cbe49b3831e18ad9e9e45c9d83e}{mpg123\+\_\+open\+\_\+fd()} to set the file descriptor for your read/lseek (doesn\textquotesingle{}t need to be a \char`\"{}real\char`\"{} file descriptor...). Setting a function to N\+U\+LL means that the default internal read is used (active from next mpg123\+\_\+open call on). Note\+: As it would be troublesome to mess with this while having a file open, this implies \hyperlink{group__mpg123__input_ga156eb0774196db868485662dc31621af}{mpg123\+\_\+close()}. 
\begin{DoxyParams}{参数}
{\em mh} & handle \\
\hline
{\em r\+\_\+read} & callback for reading (behaviour like P\+O\+S\+IX read) \\
\hline
{\em r\+\_\+lseek} & callback for seeking (like P\+O\+S\+IX lseek) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
M\+P\+G123\+\_\+\+OK on success 
\end{DoxyReturn}
\mbox{\Hypertarget{group__mpg123__lowio_ga61a125c56f2aab9590a4b1a29194dc10}\label{group__mpg123__lowio_ga61a125c56f2aab9590a4b1a29194dc10}} 
\index{mpg123 low level I/O@{mpg123 low level I/O}!mpg123\+\_\+replace\+\_\+reader\+\_\+handle@{mpg123\+\_\+replace\+\_\+reader\+\_\+handle}}
\index{mpg123\+\_\+replace\+\_\+reader\+\_\+handle@{mpg123\+\_\+replace\+\_\+reader\+\_\+handle}!mpg123 low level I/O@{mpg123 low level I/O}}
\subsubsection{\texorpdfstring{mpg123\+\_\+replace\+\_\+reader\+\_\+handle()}{mpg123\_replace\_reader\_handle()}}
{\footnotesize\ttfamily \hyperlink{mpg123_8h_a2ba98cfba3f760879df70e755b2a61cc}{M\+P\+G123\+\_\+\+E\+X\+P\+O\+RT} int mpg123\+\_\+replace\+\_\+reader\+\_\+handle (\begin{DoxyParamCaption}\item[{\hyperlink{group__mpg123__init_ga6728e2839a395f3a07d4514da659faca}{mpg123\+\_\+handle} $\ast$}]{mh,  }\item[{ssize\+\_\+t($\ast$)(\hyperlink{interfacevoid}{void} $\ast$, \hyperlink{interfacevoid}{void} $\ast$, size\+\_\+t)}]{r\+\_\+read,  }\item[{off\+\_\+t($\ast$)(\hyperlink{interfacevoid}{void} $\ast$, off\+\_\+t, int)}]{r\+\_\+lseek,  }\item[{\hyperlink{interfacevoid}{void}($\ast$)(\hyperlink{interfacevoid}{void} $\ast$)}]{cleanup }\end{DoxyParamCaption})}

Replace I/O functions with your own ones operating on some kind of handle instead of integer descriptors. The handle is a void pointer, so you can pass any data you want... \hyperlink{group__mpg123__input_gaadda450ea307f88589cb77ffda0754ab}{mpg123\+\_\+open\+\_\+handle()} is the call you make to use the I/O defined here. There is no fallback to internal read/seek here. Note\+: As it would be troublesome to mess with this while having a file open, this \hyperlink{group__mpg123__input_ga156eb0774196db868485662dc31621af}{mpg123\+\_\+close()} is implied here. 
\begin{DoxyParams}{参数}
{\em mh} & handle \\
\hline
{\em r\+\_\+read} & callback for reading (behaviour like P\+O\+S\+IX read) \\
\hline
{\em r\+\_\+lseek} & callback for seeking (like P\+O\+S\+IX lseek) \\
\hline
{\em cleanup} & \hyperlink{struct_a}{A} callback to clean up an I/O handle on mpg123\+\_\+close, can be N\+U\+LL for none (you take care of cleaning your handles). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
M\+P\+G123\+\_\+\+OK on success 
\end{DoxyReturn}
